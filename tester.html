<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Hitung Chip</title>
  <style>
    table, th, td {
      border: 1px solid black;
      border-collapse: collapse;
      padding: 5px;
      text-align: center;
    }
    #warningBox {
      display: none;
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: #ff4d4d;
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      font-weight: bold;
      z-index: 9999;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }
  </style>
</head>
<body>
  <h2>Hitung Chip</h2>

  <table>
    <tr>
      <th>Tipe</th>
      <th>100m</th>
      <th>500m</th>
      <th>1b</th>
      <th>Paket</th>
    </tr>
    <tr>
      <td>HD</td>
      <td><input id="hd_100m" type="text" value="0"></td>
      <td><input id="hd_500m" type="text" value="0"></td>
      <td><input id="hd_1b" type="text" value="0"></td>
      <td><input id="hd_paket" type="text" value="0"></td>
    </tr>
    <tr>
      <td>RD</td>
      <td><input id="rd_100m" type="text" value="0"></td>
      <td><input id="rd_500m" type="text" value="0"></td>
      <td><input id="rd_1b" type="text" value="0"></td>
      <td><input id="rd_paket" type="text" value="0"></td>
    </tr>
  </table>

  <button onclick="hitung()">Hitung</button>

  <h3>Hasil:</h3>
  <pre id="output"></pre>

  <!-- kotak warning -->
  <div id="warningBox">Kolom paket wajib 10b dan diatasnya !</div>

  <script>
    const hd = {
      "100m": { jumlah: 0, harga: 6 },
      "500m": { jumlah: 0, harga: 30 },
      "1b": { jumlah: 0, harga: 58 },
      "paket": { jumlah: 0, harga: 57 }
    };
    const rd = {
      "100m": { jumlah: 0, harga: 7 },
      "500m": { jumlah: 0, harga: 35 },
      "1b": { jumlah: 0, harga: 65 },
      "paket": { jumlah: 0, harga: 64 }
    };

    const satuanJuta = {
      "100m": 100,
      "500m": 500,
      "1b": 1000,
      "paket": 1000
    };

    function showWarning(msg) {
      const box = document.getElementById("warningBox");
      box.innerText = msg;
      box.style.display = "block";
      setTimeout(() => {
        box.style.display = "none";
      }, 3000);
    }

    function ambilJumlahChip(dataObj, prefix) {
      Object.keys(dataObj).forEach(key => {
        let raw = document.getElementById(`${prefix}_${key}`).value.trim();

        if (!raw) {
          dataObj[key].jumlah = 0;
          return;
        }

        // support input "10+12+15"
        let total = raw.split("+").reduce((acc, num) => acc + (parseInt(num) || 0), 0);

        if (key === "paket") {
          if (total < 10) {
            showWarning("Kolom paket wajib 10b dan diatasnya !");
            dataObj[key].jumlah = 0;
          } else {
            dataObj[key].jumlah = total;
          }
        } else {
          dataObj[key].jumlah = total;
        }
      });
    }

    function hitungTotal(dataObj) {
      let totalHarga = 0;
      let totalChip = 0;
      Object.keys(dataObj).forEach(key => {
        totalHarga += dataObj[key].jumlah * dataObj[key].harga;
        totalChip += dataObj[key].jumlah * satuanJuta[key];
      });
      return { totalHarga, totalChip };
    }

    function hitung() {
      ambilJumlahChip(hd, "hd");
      ambilJumlahChip(rd, "rd");

      const totalHd = hitungTotal(hd);
      const totalRd = hitungTotal(rd);

      let output = "";

      output += `HD: ${totalHd.totalChip}M chip, Harga = ${totalHd.totalHarga}k\n`;
      output += `RD: ${totalRd.totalChip}M chip, Harga = ${totalRd.totalHarga}k\n`;

      const totalSemuaChip = totalHd.totalChip + totalRd.totalChip;
      const totalSemuaHarga = totalHd.totalHarga + totalRd.totalHarga;

      output += `\nTOTAL SEMUA: ${totalSemuaChip}M chip, Harga = ${totalSemuaHarga}k`;

      document.getElementById("output").innerText = output;
    }
  </script>
</body>
</html>
